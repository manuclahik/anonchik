"""
–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –±–æ—Ç–∞
"""
import os
from dataclasses import dataclass, field
from typing import List
from dotenv import load_dotenv

load_dotenv()


@dataclass
class Settings:
    # Telegram
    BOT_TOKEN: str = os.getenv("BOT_TOKEN", "YOUR_BOT_TOKEN_HERE")

    # –ê–¥–º—ñ–Ω–∏ (—á–µ—Ä–µ–∑ –∫–æ–º—É)
    ADMIN_IDS: List[int] = field(default_factory=lambda: [
        int(x.strip()) for x in os.getenv("ADMIN_IDS", "").split(",") if x.strip()
    ])

    # –í–µ–±—Ö—É–∫
    USE_WEBHOOK: bool = os.getenv("USE_WEBHOOK", "false").lower() == "true"
    WEBHOOK_URL: str = os.getenv("WEBHOOK_URL", "https://your-domain.com")
    WEBHOOK_PATH: str = os.getenv("WEBHOOK_PATH", "/webhook")
    WEBHOOK_HOST: str = os.getenv("WEBHOOK_HOST", "0.0.0.0")
    WEBHOOK_PORT: int = int(os.getenv("PORT", os.getenv("WEBHOOK_PORT", "8080")))

    # –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
    DB_PATH: str = os.getenv("DB_PATH", "bot_data.db")

    # –õ—ñ–º—ñ—Ç–∏
    RATE_LIMIT_SECONDS: int = int(os.getenv("RATE_LIMIT_SECONDS", "30"))
    MAX_QUESTION_LENGTH: int = int(os.getenv("MAX_QUESTION_LENGTH", "1000"))

    # –°–ø–∞–º-—Ñ—ñ–ª—å—Ç—Ä
    SPAM_WORDS: List[str] = field(default_factory=lambda: [
        word.strip().lower() for word in
        os.getenv("SPAM_WORDS", "").split(",") if word.strip()
    ])

    # –ü—É–±–ª—ñ–∫–∞—Ü—ñ—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π —É –∫–∞–Ω–∞–ª
    ANSWERS_CHANNEL_ID: str = os.getenv("ANSWERS_CHANNEL_ID", "")

    # –ê–≤—Ç–æ-–≤–∏–¥–∞–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö (—Å–µ–∫—É–Ω–¥–∏) –ø—ñ—Å–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
    DATA_TTL_SECONDS: int = int(os.getenv("DATA_TTL_SECONDS", "300"))


settings = Settings()

# –¢–µ–∫—Å—Ç–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
TEXTS = {
    "welcome": (
        "üëã <b>–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ!</b>\n\n"
        "–¶–µ–π –±–æ—Ç –¥–æ–∑–≤–æ–ª—è—î –∑–∞–¥–∞–≤–∞—Ç–∏ –∞–Ω–æ–Ω—ñ–º–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—É.\n"
        "–í–∞—à–∞ –æ—Å–æ–±–∏—Å—Ç—ñ—Å—Ç—å –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –ø–æ–≤–Ω—ñ—Å—Ç—é –ø—Ä–∏—Ö–æ–≤–∞–Ω–æ—é."
    ),
    "how_it_works": (
        "üîê <b>–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î —Ç–∞ –ø—Ä–æ –∞–Ω–æ–Ω—ñ–º–Ω—ñ—Å—Ç—å</b>\n\n"
        "‚úÖ <b>–©–æ –º–∏ <u>–Ω–µ</u> –∑–±–µ—Ä—ñ–≥–∞—î–º–æ:</b>\n"
        "‚Ä¢ –í–∞—à username –∞–±–æ —ñ–º'—è\n"
        "‚Ä¢ –í–∞—à Telegram ID (–≤–∏–¥–∞–ª—è—î—Ç—å—Å—è –ø—ñ—Å–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ)\n"
        "‚Ä¢ –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –ø—Ä–æ—Ñ—ñ–ª—å\n"
        "‚Ä¢ –ë—É–¥—å-—è–∫—É –æ—Å–æ–±–∏—Å—Ç—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é\n\n"
        "üîÑ <b>–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:</b>\n"
        "1Ô∏è‚É£ –í–∏ –ø–∏—à–µ—Ç–µ –ø–∏—Ç–∞–Ω–Ω—è ‚Üí –≤–æ–Ω–æ –ø–µ—Ä–µ—Å–∏–ª–∞—î—Ç—å—Å—è –∞–¥–º—ñ–Ω—É –±–µ–∑ –≤–∞—à–∏—Ö –¥–∞–Ω–∏—Ö\n"
        "2Ô∏è‚É£ –ê–¥–º—ñ–Ω –±–∞—á–∏—Ç—å –ª–∏—à–µ —Ç–µ–∫—Å—Ç –ø–∏—Ç–∞–Ω–Ω—è —Ç–∞ –∞–Ω–æ–Ω—ñ–º–Ω–∏–π ID\n"
        "3Ô∏è‚É£ –ü—ñ—Å–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ ‚Äî —Ç–µ—Ö–Ω—ñ—á–Ω–∏–π ID –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è\n\n"
        "‚è± <b>–û–±–º–µ–∂–µ–Ω–Ω—è:</b>\n"
        f"‚Ä¢ –û–¥–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è —Ä–∞–∑ –Ω–∞ {Settings().RATE_LIMIT_SECONDS} —Å–µ–∫—É–Ω–¥\n"
        "‚Ä¢ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –¥–æ–≤–∂–∏–Ω–∞ –ø–∏—Ç–∞–Ω–Ω—è: 1000 —Å–∏–º–≤–æ–ª—ñ–≤\n\n"
        "üí° <i>–ú–∏ –Ω–µ –º–æ–∂–µ–º–æ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ –≤–∞—Å –∂–æ–¥–Ω–∏–º —á–∏–Ω–æ–º –ø—ñ—Å–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö –¥–∞–Ω–∏—Ö.</i>"
    ),
    "ask_question": (
        "‚úçÔ∏è <b>–ù–∞–ø–∏—à—ñ—Ç—å –≤–∞—à–µ –ø–∏—Ç–∞–Ω–Ω—è:</b>\n\n"
        "<i>–ü–∏—Ç–∞–Ω–Ω—è –±—É–¥–µ –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ –∞–Ω–æ–Ω—ñ–º–Ω–æ. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å ¬´–°–∫–∞—Å—É–≤–∞—Ç–∏¬ª —â–æ–± –≤—ñ–¥–º—ñ–Ω–∏—Ç–∏.</i>"
    ),
    "confirm_question": (
        "üìã <b>–í–∞—à–µ –ø–∏—Ç–∞–Ω–Ω—è:</b>\n\n"
        "{question}\n\n"
        "–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ –∞–Ω–æ–Ω—ñ–º–Ω–æ?"
    ),
    "question_sent": (
        "‚úÖ <b>–í–∞—à–µ –ø–∏—Ç–∞–Ω–Ω—è –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ –∞–Ω–æ–Ω—ñ–º–Ω–æ!</b>\n\n"
        "üî¢ ID –∑–∞–ø–∏—Ç—É: <code>{request_id}</code>\n\n"
        "‚è≥ –û—á—ñ–∫—É–π—Ç–µ –≤—ñ–¥–ø–æ–≤—ñ–¥—å. –í–∏ –æ—Ç—Ä–∏–º–∞—î—Ç–µ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –∫–æ–ª–∏ –∞–¥–º—ñ–Ω –≤—ñ–¥–ø–æ–≤—ñ—Å—Ç—å."
    ),
    "answer_received": (
        "üì® <b>–í—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –≤–∞—à–µ –∞–Ω–æ–Ω—ñ–º–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è</b>\n"
        "üî¢ ID –∑–∞–ø–∏—Ç—É: <code>{request_id}</code>\n\n"
        "‚ùì <b>–ü–∏—Ç–∞–Ω–Ω—è:</b>\n{question}\n\n"
        "üí¨ <b>–í—ñ–¥–ø–æ–≤—ñ–¥—å:</b>\n{answer}\n\n"
        "<i>üîê –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–∞–Ω—ñ –ø—Ä–æ –≤–∞—à –∑–∞–ø–∏—Ç –≤–∏–¥–∞–ª–µ–Ω–æ.</i>"
    ),
    "cancelled": "‚ùå –°–∫–∞—Å–æ–≤–∞–Ω–æ. –ü–æ–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é.",
    "rate_limited": "‚è≥ –ó–∞—á–µ–∫–∞–π—Ç–µ {seconds} —Å–µ–∫—É–Ω–¥ –ø–µ—Ä–µ–¥ –Ω–∞—Å—Ç—É–ø–Ω–∏–º –ø–∏—Ç–∞–Ω–Ω—è–º.",
    "question_too_long": "‚ö†Ô∏è –ü–∏—Ç–∞–Ω–Ω—è –∑–∞–Ω–∞–¥—Ç–æ –¥–æ–≤–≥–µ. –ú–∞–∫—Å–∏–º—É–º 1000 —Å–∏–º–≤–æ–ª—ñ–≤.",
    "spam_detected": "üö´ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –º—ñ—Å—Ç–∏—Ç—å –Ω–µ–¥–æ–∑–≤–æ–ª–µ–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç.",
    "no_active_question": "‚ùì –ù–µ–º–∞—î –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ.",
    "admin_new_question": (
        "üÜï <b>–ù–æ–≤–µ –∞–Ω–æ–Ω—ñ–º–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è</b>\n"
        "üî¢ ID: <code>{request_id}</code>\n\n"
        "‚ùì <b>–ü–∏—Ç–∞–Ω–Ω—è:</b>\n{question}\n\n"
        "‚Ü©Ô∏è –î–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É –Ω–∏–∂—á–µ –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ /reply {request_id}"
    ),
    "admin_stats": (
        "üìä <b>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</b>\n\n"
        "üì® –í—Å—å–æ–≥–æ –ø–∏—Ç–∞–Ω—å: {total}\n"
        "‚úÖ –í—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–∞–¥–∞–Ω–æ: {answered}\n"
        "‚è≥ –û—á—ñ–∫—É—é—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ: {pending}\n"
        "‚åö –°–µ—Ä. —á–∞—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ: {avg_time}\n"
        "üïê –û—Å—Ç–∞–Ω–Ω—î –ø–∏—Ç–∞–Ω–Ω—è: {last_question}"
    ),
}
